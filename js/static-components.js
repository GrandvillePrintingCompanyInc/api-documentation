import{copyToClipboard as a}from"./clipboard.js";class c extends HTMLElement{constructor(){super()}connectedCallback(){this.querySelectorAll("button").forEach(n=>{n.addEventListener("click",()=>{n.classList.toggle("is-open")})})}}customElements.define("static-navigation-component",c);class l extends HTMLElement{constructor(){super();this.copyCodeToClipboard=t=>{const o=t.currentTarget,s=o.parentElement.querySelector("code").innerText.trim();a(s),o.focus(),o.classList.add("is-success"),setTimeout(()=>{o.classList.remove("is-success")},3e3)};this.copyLinkToClipboard=t=>{t.preventDefault();const o=t.currentTarget;location.hash=o.dataset.hash}}highlightSynatx(){this.querySelectorAll("pre code").forEach(t=>{t.innerHTML=t.innerHTML.replace(/\t/g,"    "),hljs?.highlightElement(t)})}scrubLinks(){const t=location.pathname.replace(/^\//,"").split("/");if(t.length){const o=new RegExp(/https?:\/\/|^\#/);this.querySelectorAll("a").forEach(e=>{const s=e.href.replace(location.origin,"").trim();o.test(s)?e.dataset.noHijack="true":(console.log(s),e.href=`${s.replace(/(\.md)$/,"").trim()}`,console.log(e.href))}),this.querySelectorAll("img").forEach(e=>{const s=e.src.replace(location.origin,"");o.test(s)||(e.src=`/${t[0]}/${s.replace(/^\//,"").trim()}`)})}}pageJump(){if(location.hash.length){const t=this.querySelector(location.hash);t&&t.scrollIntoView()}else this.scrollTo({top:0,left:0,behavior:"auto"})}injectCopyToClipboardButtons(){this.querySelectorAll("pre code").forEach(t=>{const o=document.createElement("button");o.setAttribute("aria-label","copy source code to clipboard"),o.className="copy-to-clipboard",o.addEventListener("click",this.copyCodeToClipboard),o.innerHTML=`
                <svg xmlns="http://www.w3.org/2000/svg" class="copy" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            `,t.parentElement.appendChild(o)})}injectPageJumpLinks(){const t=[];this.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(e=>{const s={label:e.innerText,hash:e.id,offset:parseInt(e.tagName.substr(1,1))-1};t.push(s);const r=document.createElement("a");r.className="page-jump-link-bttn",r.href=e.id,r.innerHTML=`
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                </svg>
            `,r.setAttribute("aria-label","click to copy a direct link to this heading"),r.addEventListener("click",this.copyLinkToClipboard),r.dataset.hash=e.id,e.appendChild(r)});const o=document.body.querySelector("static-subnav-component");o&&t.map(e=>{o.innerHTML+=`<a style="padding-left: ${e.offset*.5}rem;" href="#${e.hash}">${e.label}</a>`})}injectTableCellNames(){this.querySelectorAll("table tbody tr td").forEach(t=>{t.setAttribute("title",t.innerText.trim())})}connectedCallback(){this.highlightSynatx(),this.scrubLinks(),this.pageJump(),this.injectCopyToClipboardButtons(),this.injectPageJumpLinks(),this.injectTableCellNames()}}customElements.define("static-doc-view",l);
